{% extends "base.html" %}

{% load static %}
{% load bleach_tags %}

{% block additional_header_items %}
<style>
  /* Match blog/article styling */
  .project-grid { max-width: 1100px; }
  .project-card { border-radius: 1rem; transition: transform .15s ease, box-shadow .15s ease; }
  .project-card:hover { transform: translateY(-2px); box-shadow: 0 .75rem 1.5rem rgba(0,0,0,.08); }
  .project-img { object-fit: cover; height: 200px; width: 100%; }
  .project-body { max-height: 9rem; overflow: auto; }
  .chip { font-size: .8rem; border: 1px solid rgba(0,0,0,.08); }
</style>
<script>currentTab="projects"</script>
{% endblock additional_header_items %}

{% block tab_name %}Projects{% endblock tab_name %}

{% block content %}
<div class="container my-4 project-grid">
  {% if projects %}
    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-3">
      {% for project in projects %}
        <div class="col">
          <article class="card project-card h-100 shadow-sm">
            {% if project.image %}
              <img class="project-img" src="{{ project.image.url }}" alt="{{ project.title }} image">
            {% endif %}

            <div class="card-body d-flex flex-column">
              <h3 class="h5 text-center mb-3">{{ project.title }}</h3>

              <div class="project-body text-body-secondary mb-3">
                {{ project.body|bleach }}
              </div>

              {% if project.tags.all %}
                <div class="d-flex flex-wrap justify-content-center gap-2 mb-2">
                  {% for tag in project.tags.all %}
                    <span class="badge bg-light text-dark chip">{{ tag.text }}</span>
                  {% endfor %}
                </div>
              {% endif %}

              {% if project.links.all %}
                <div class="d-flex flex-wrap justify-content-center gap-2 mt-auto">
                  {% for link in project.links.all %}
                    <a class="btn btn-primary btn-sm"
                       href="{{ link.url }}"
                       target="_blank"
                       rel="noopener noreferrer">{{ link.text }}</a>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          </article>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-secondary">No projects yet.</div>
  {% endif %}

  <div class="text-center my-4">
    <a href="mailto:isaachisey@gmail.com" target="_blank" class="btn btn-success btn-lg shadow">
      Get in Touch
    </a>
  </div>
</div>
{% endblock content %}
