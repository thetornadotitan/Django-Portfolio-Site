{% extends "base.html" %}
{% load static %}
{% load bleach_tags %}

{% block additional_header_items %}
<style>
  .blog-card { border-radius: 1rem; transition: transform .15s ease, box-shadow .15s ease; }
  .blog-card:hover { transform: translateY(-2px); box-shadow: 0 .75rem 1.5rem rgba(0,0,0,.08); }
  .post-title a { text-decoration: none; }
  .post-excerpt { max-height: 8rem; overflow: auto; }
  .meta { font-size: .9rem; opacity: .65; }
  .chip { font-size: .75rem; border: 1px solid rgba(0,0,0,.08); }
</style>
<script>currentTab="blog"</script>
{% endblock additional_header_items %}

{% block tab_name %}Blog{% endblock tab_name %}

{% block content %}
<div class="container my-4">

  {% if posts %}
    <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-3">
      {% for post in posts %}
        <div class="col">
          <article class="card blog-card h-100">
            <div class="card-body d-flex flex-column">
              <h2 class="h5 post-title mb-2">
                <a class="stretched-link"
                   href="{% url 'blog_detail' blog_id=post.pk %}">{{ post.title|bleach }}</a>
              </h2>

              <div class="meta d-flex flex-wrap gap-2 mb-2">
                <span class="badge bg-light text-dark chip">
                  by {{ post.author.first_name|default:post.author.username|bleach }}
                </span>
                <span class="badge bg-light text-dark chip">
                  Created {{ post.created|date:"M j, Y" }}
                </span>
                <span class="badge bg-light text-dark chip">
                  Updated {{ post.updated|date:"M j, Y" }}
                </span>
              </div>

              <div class="post-excerpt text-body-secondary">
                {{ post.summary|bleach }}
              </div>

              <div class="mt-3 d-flex gap-2">
                <a href="{% url 'blog_detail' blog_id=post.pk %}" class="btn btn-primary btn-sm">Read more</a>
              </div>
            </div>
          </article>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-secondary">No posts yet.</div>
  {% endif %}

  <div class="text-center my-4">
    <a href="mailto:isaachisey@gmail.com" target="_blank" class="btn btn-success btn-lg shadow">
      Get in Touch
    </a>
  </div>
</div>
{% endblock content %}
